/*! Built with http://stenciljs.com */
const{h,Context}=window.virtualscroll;class FetchHelperWebComponent{constructor(){this.list=[],this.selector="",this.virtual=[],this.changed=[]}componentWillLoad(){this.request()}request(){let t={};t["Content-Type"]="application/json",t.token="kRuGZ3Xd";let e={method:"GET",mode:"cors",headers:new Headers(t)},s=new Request("https://jsonplaceholder.typicode.com/photos",e);fetch(s).then(t=>t.json()).then(t=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,e.addEventListener("toBottom",()=>{this.lazyRequest()}),e.addEventListener("update",t=>{console.log("update"),this.virtual=t.detail,this.changed=[...this.changed,""]})})}lazyRequest(){let t={};t["Content-Type"]="application/json";let e={method:"GET",mode:"cors",headers:new Headers(t)},s=new Request("https://jsonplaceholder.typicode.com/photos",e);fetch(s).then(t=>t.json()).then(t=>{setTimeout(()=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,this.list.length>200?e.setInfinateFinally():e.setInfinateOn()},3e3)})}reload(t){const e=this.el.querySelector("virtual-scroll");e.list=[],e.clear(),this.changed=[...this.changed,""],setTimeout(()=>{let t={};t["Content-Type"]="application/json";let e={method:"GET",mode:"cors",headers:new Headers(t)},s=new Request("https://jsonplaceholder.typicode.com/photos",e);fetch(s).then(t=>t.json()).then(t=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,this.list.length>200?e.setInfinateFinally():e.setInfinateOn()})},2e3)}scrolling(){const t=this.el.querySelector("virtual-scroll");t.scrollToNode(25,1e3,-50)}render(){return[h("div",{onClick:this.reload.bind(this),class:"reload"},"reload"),h("div",{onClick:this.scrolling.bind(this),class:"scrolling"},"scrolling"),h("div",{class:"virtual-container"},h("virtual-scroll",{"bottom-offset":"5","virtual-ratio":"15",selector:this.selector},h("div",{slot:"virtual",class:"virtual-slot"},this.virtual.map((t,e)=>h("div",{class:"offer virtual-item",id:t.index},h("div",{style:{backgroundImage:"url("+t.thumbnailUrl+")"},class:"cover"}),h("div",{class:"title"},t.index),h("div",{class:"title"},t.title)))),h("div",{slot:"loader"},"loading...")))]}static get is(){return"fetch-helper"}static get properties(){return{changed:{state:!0},el:{elementRef:!0},list:{state:!0},selector:{type:String}}}static get style(){return".cover{position:relative;width:150px;height:150px;background-size:cover;margin:0 auto}.title{font-size:15px;height:40px;text-align:center}.cover:after{content:\"\";display:block;padding-bottom:67%}.reload,.scrolling{position:absolute;top:0;margin:10px;padding:10px;background:#ccc;cursor:pointer;z-index:1}.scrolling{right:0}.reload{left:0}"}}export{FetchHelperWebComponent as FetchHelper};