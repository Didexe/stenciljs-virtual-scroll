/*! Built with http://stenciljs.com */
const{h:t}=window.virtualscroll;class e{constructor(){this.list=[],this.selector="",this.virtual=[],this.changed=[]}componentWillLoad(){this.request()}request(){let t={method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json",token:"kRuGZ3Xd"})},e=new Request("https://jsonplaceholder.typicode.com/photos",t);fetch(e).then(t=>t.json()).then(t=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,e.addEventListener("toBottom",()=>{this.lazyRequest()}),e.addEventListener("update",t=>{console.log("update"),this.virtual=t.detail,this.changed=[...this.changed,""]})})}lazyRequest(){let t={method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json"})},e=new Request("https://jsonplaceholder.typicode.com/photos",t);fetch(e).then(t=>t.json()).then(t=>{setTimeout(()=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,this.list.length>200?e.setInfinateFinally():e.setInfinateOn()},3e3)})}reload(){const t=this.el.querySelector("virtual-scroll");t.list=[],t.clear(),this.changed=[...this.changed,""],setTimeout(()=>{let t={method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json"})},e=new Request("https://jsonplaceholder.typicode.com/photos",t);fetch(e).then(t=>t.json()).then(t=>{t.splice(0,50).map(t=>{t.index=this.list.length,this.list=[...this.list,t]});const e=this.el.querySelector("virtual-scroll");e.list=this.list,this.list.length>200?e.setInfinateFinally():e.setInfinateOn()})},2e3)}scrolling(){this.el.querySelector("virtual-scroll").scrollToNode(25,1e3,-50)}render(){return[t("div",{onClick:this.reload.bind(this),class:"reload"},"reload"),t("div",{onClick:this.scrolling.bind(this),class:"scrolling"},"scrolling"),t("div",{class:"virtual-container"},t("virtual-scroll",{"bottom-offset":"5","virtual-ratio":"15",selector:this.selector},t("div",{slot:"virtual",class:"virtual-slot"},this.virtual.map(e=>t("div",{class:"offer virtual-item",id:e.index},t("div",{style:{backgroundImage:"url("+e.thumbnailUrl+")"},class:"cover"}),t("div",{class:"title"},e.index),t("div",{class:"title"},e.title)))),t("div",{slot:"loader"},"loading...")))]}static get is(){return"fetch-helper"}static get properties(){return{changed:{state:!0},el:{elementRef:!0},list:{state:!0},selector:{type:String,attr:"selector"}}}static get style(){return".cover{position:relative;width:150px;height:150px;background-size:cover;margin:0 auto}.title{font-size:15px;height:40px;text-align:center}.cover:after{content:\"\";display:block;padding-bottom:67%}.reload,.scrolling{position:absolute;top:0;margin:10px;padding:10px;background:#ccc;cursor:pointer;z-index:1}.scrolling{right:0}.reload{left:0}"}}export{e as FetchHelper};